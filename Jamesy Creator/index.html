<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="images/docs.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
  <link href="https://fonts.googleapis.com/css2?family=Mulish&display=swap" rel="stylesheet">
<title>Jamesy Creator</title>
<link rel="icon" href="shapes.png">
  <style>
    body {
      padding: 0;
      padding-right:15px;
      margin: 0;
      background: ghostwhite;
      font-family: "Mulish";
    }

    * {
        font-family: "Mulish";
    }


    .top-nav {
      height: 60px;
      background: ghostwhite;
      display:flex;
      padding:20px;
      width: 100%;
    }

    .layout {
      display: flex;
      height: calc(100vh - 80px);
    }

    .side-nav {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 300px;
      padding-top:10px;
      background: ghostwhite;
      height: 100%;
    }

    .side-nav button {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 90%;
      padding: 15px;
      border-radius: 25px;
      border: none;
      background: transparent;
      margin-bottom: 6px;
      text-align: left;
      outline-color:solid dodgerblue 2px;
      font-size: 16px;
      cursor: pointer;
    }


    .side-nav button:hover {
      background: #f2f2f2;
    }

    .active {
      background: #baf0ff !important;
    }

    .main {
      flex-grow: 1;
      border-radius: 20px;
      background: white;
      height: 100%;
    }

    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    .logo {
        height:60px;
        cursor:pointer;

    }

    .title {
        font-size:24px;
        margin-top:13px;
        cursor:default;
        margin-left:10px;
    }

    .apps-iframe {
        width:100%;
        border:none;
        outline:none;
        margin:none;
        border-radius:20px;
        padding:none;
        box-shadow:none;
        height:100vh;
    }

    .page {
        display:none;
    }

    .welcome_text {
        font-size:35px;
        display:block;
        margin-top:60px;
        cursor:default;
    }

   .rainbow-border {
      position: relative;
      border-radius: 12px;
      padding: 2px;
      width:60%;
      margin-top:20px;
      background: linear-gradient(270deg,
        red, orange, yellow, lime, cyan, blue, violet, red);
      background-size: 800% 800%;
      animation: borderAnimation 10s linear infinite;
      box-sizing: border-box;
    }

    .rainbow-border::before {
      content: "";
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      border-radius: 16px;
      background: inherit;
      filter: blur(8px);
      z-index: -1;
    }

    textarea {
      width: 100%;
        background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(8px); 
  -webkit-backdrop-filter: blur(8px); 
      height: 125px;
      border: none;
      outline: none;
      resize: none;
      font-size: 18px;
      border-radius: 10px;
      padding: 12px;
      font-family:"Mulish";
      background: white;
      color: black;
      box-sizing: border-box;
    }


    @keyframes borderAnimation {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    .search-bar {
        margin-bottom:12px;
        display:block;
        width:60%;
        height:30px;

    }

        #menuBtn {
      padding:10px;
      cursor:pointer;
      margin-top:3px;
      margin-left:5px;
      background:white;
      margin-right:10px;
      height:35px;
      border-radius:10px;
      display:none;
      transition: 0.3s;
    }

    #menuBtn:hover {
      background:whitesmoke;
    }

    @media (max-width:1000px) {
      #apps {
        display:block;
            }
            #dashboard {
              display:none;
            }
            .side-nav {
              display: none;
            }

            #menuBtn {
              display:inline-block;
            }

            .logo {
              display:none;
            }

            .main {
              margin-left:25px;
            }
    }



  </style>
</head>
<body>

  <div class="top-nav">
    <img src="shapes.png" onclick="home()" class="logo">
   <span id="menuBtn" onclick="toggleSide()"><span class="material-symbols-outlined" style="font-size: 35px;">menu</span></span>
    <span class="title">Jamesy Creator</span>
  </div>

  <div class="layout">
    <div class="side-nav" id="side-nav">
      <button class="active" onclick="page('dashboard')"><span class="material-symbols-outlined">home</span>Home</button>
      <button onclick="page('apps')"><span class="material-symbols-outlined">apps</span>Apps</button>
      <button onclick="page('shop')"><span class="material-symbols-outlined">shopping_cart</span>Shop</button>
         <button onclick="page('profile')"><span class="material-symbols-outlined">account_circle</span>Profile</button>
           <button onclick="page('account')"><span class="material-symbols-outlined">settings</span>Account & Settings</button>
    </div>

    <div class="main">

           <div id="dashboard" class="page">
             <iframe src="search.html" class="apps-iframe"></iframe>
        </div>

        <div id="apps" class="page">
            <iframe src="grid.html" class="apps-iframe"></iframe>
        </div>

         <div id="shop" class="page">
            <iframe src="shop.html" class="apps-iframe"></iframe>
        </div>

         <div id="profile" class="page">
            <iframe src="profile.html" class="apps-iframe"></iframe>
        </div>

        <div id="account" class="page">
            <iframe src="account.html" class="apps-iframe"></iframe>
        </div>


    </div>
  </div>


  <div style="
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100vw;
  background: #fff;
  border-top: 2px solid whitesmoke;
  display: flex;
  align-items: center;
  padding: 16px 24px;
  gap: 16px;
  margin: 0;
" id="banner">
  <img 
    src="avatars/guest.png" 
    alt="Profile" 
    id="avatar"
    style="
      height: 48px;
      width: 48px;
      border-radius: 50%;
      object-fit: cover;
    "
  />
  <div style="display: flex; flex-direction: column; line-height: 1.2;">
    <span 
      id="usernameDisplay" 
      style="
        font-size: 1.25rem;
        font-weight: 600;
        color: #333;
      "
    >
      Guest
    </span>
    <span style="font-size: 0.875rem; color: #666;">
      0 points
    </span>
  </div>
</div>

  <script>

 document.getElementById("dashboard").style.display = "block";

  function page(pageId) {

  document.querySelectorAll(".page").forEach(e => e.style.display = "none");

  document.getElementById(pageId).style.display = "block";

  document.querySelectorAll(".side-nav button").forEach(btn => btn.classList.remove("active"));

  event.currentTarget.classList.add("active");

}

function toggleSide() {

  console.log("toggleSide() fired")

  const sideNav = document.getElementById("side-nav");
  if (sideNav.style.display === "flex") {
    sideNav.style.display = "none";
  } else {
    sideNav.style.display = "flex";
  }
}


     const avatarImg = document.getElementById('avatar');
  const savedAvatar = localStorage.getItem('avatar');
  if (savedAvatar) {
    avatarImg.src = savedAvatar;
  } else {
    avatarImg.alt = "No avatar selected";
  }

   document.getElementById('usernameDisplay').textContent = localStorage.getItem('username') || 'Guest';
    document.querySelectorAll('.username').forEach(e => e.textContent = localStorage.getItem('username') || 'Guest');


    function home() {
        window.location.reload()
        window.location.href = "index.html"
    }

 

sername = localStorage.getItem("username");
document.querySelectorAll('.username').forEach(el => el.textContent = username);


const user = localStorage.getItem("username");

if (!user || user.toLowerCase() === "guest") {
  window.location.href = "login.html";
}

            document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'q') {
        window.location.href = 'loginback.html?path=lock';
    }
});

if (localStorage.getItem('locked') === 'true') {
  window.location.href = 'loginback.html?path=lock';
}

if (!localStorage.getItem("userPassword")) {
    window.location.href = "login.html";
  }

      if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .then(() => console.log("Service Worker registered"))
      .catch(err => console.error("Service Worker registration failed:", err));
  }


    </script>

</body>
</html>
