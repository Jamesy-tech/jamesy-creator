<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apps & Tools</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500&family=Mulish:wght@600;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:"Rubik",sans-serif; font-weight:400; background:#fff; color:#000; min-height:100vh; }
.content-header { padding:24px 32px; border-bottom:1px solid #e5e5e5; background:#fff; position:sticky; top:0; z-index:100; }
.breadcrumb { display:flex; align-items:center; margin-bottom:8px; font-size:14px; color:#666; }
.breadcrumb-link { color:#0078d4; text-decoration:none; }
.breadcrumb-link:hover { text-decoration:underline; }
.breadcrumb-separator { margin:0 8px; }
.page-title { font-family:"Mulish",sans-serif; font-size:28px; font-weight:700; color:#000; margin-bottom:12px; }
.search-container { display:none; gap:12px; align-items:center; margin-bottom:8px; }
.search-input { display:none; width:100%; max-width:520px; height:40px; padding:8px 12px; border:1px solid #e5e5e5; border-radius:8px; font-size:14px; }
.search-info { font-size:15px; color:#666; margin-top:6px; }
.content-body { padding:18px 22px; margin:0 auto; }
.no-results { text-align:center; padding:56px 20px; display:none; }
.no-results-icon { width:64px; height:64px; margin:0 auto 16px; opacity:0.4; }
.no-results h2 { font-family:"Mulish",sans-serif; font-size:22px; font-weight:600; margin-bottom:12px; color:#000; }
.no-results p { font-size:15px; color:#666; margin-bottom:24px; max-width:520px; margin-left:auto; margin-right:auto; line-height:1.5; }
.results-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:16px; margin-bottom:24px; }
.setting-link { text-decoration:none; color:inherit; }
.setting-card { background:#fff; border:1px solid #e5e5e5; border-radius:8px; padding:18px; cursor:pointer; transition:all 0.16s ease; display:flex; align-items:center; gap:12px; }
.setting-card:hover { border-color:#0078d4; box-shadow:0 6px 18px rgba(0,120,212,0.08); transform:translateY(-2px); }
.setting-icon { width:44px; height:44px; flex-shrink:0; display:grid; place-items:center; border-radius:8px; background:transparent; opacity:0.95; }
.setting-info { flex:1; }
.setting-category { font-size:11px; color:#0078d4; margin-bottom:6px; font-weight:600; text-transform:uppercase; letter-spacing:0.6px; }
.setting-title { font-family:"Mulish",sans-serif; font-size:16px; font-weight:700; color:#000; margin-bottom:6px; line-height:1.2; }
.setting-description { font-size:13px; color:#666; line-height:1.4; }
.setting-arrow { width:16px; height:16px; opacity:0.6; margin-left:8px; flex-shrink:0; }
.google-search-card { display:flex; align-items:center; justify-content:space-between; width:50%; margin:16px auto; background:#f9f9f9; border:1px solid #e5e5e5; border-radius:8px; padding:12px 16px; cursor:pointer; transition:all 0.16s ease; height:56px; display:none; }
.google-search-card:hover { border-color:#d1d1d1; background:#f5f5f5; }
.google-search-info { display:flex; align-items:center; gap:12px; }
.google-icon { width:20px; height:20px; opacity:0.7; }
.google-search-text { font-size:14px; color:#666; }
.external-link-icon { width:14px; height:14px; opacity:0.5; }
@media (max-width:768px){ .content-header, .content-body{ padding:16px; } .page-title{ font-size:22px; } .search-input{ max-width:100%; } }
</style>
</head>
<body>
<div class="content-header">
    <div class="breadcrumb">
        <a href="index.html" class="breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">&gt;</span>
        <span>Search results</span>
    </div>
    <h1 class="page-title">Search results</h1>
    <div class="search-container">
        <input id="searchInput" class="search-input" type="search" placeholder="Search apps and settings" autocapitalize="off" autocomplete="off" />
    </div>
    <div style="display:none" class="search-info" id="searchInfo">Search results for ""</div>
</div>

<div class="content-body">
    <div class="no-results" id="noResults">
        <div class="no-results-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
        </div>
        <h2>No results found</h2>
        <p>We couldn't find any resources that match your search. Try searching with different keywords.</p>
    </div>

    <div class="results-grid" id="resultsGrid"></div>

    <div class="google-search-card" id="googleSearchCard">
        <div class="google-search-info">
            <svg class="google-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            <span class="google-search-text" id="googleSearchText">Search on Google</span>
        </div>
        <svg class="external-link-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
        </svg>
    </div>
</div>

<script>
const settingsData = [
{title:"Open File", category:"Tools", description:"", link:"open.html", icon:"shapes.png"},
{title:"Docs", category:"Editors", description:"", link:"https://jamesy-tech.github.io/jamesy-creator-docs", icon:"docs.png"},
{title:"Drawings", category:"Creative", description:"", link:"https://jamesy-tech.github.io/jamesy-creator-drawings", icon:"drawings.png"},
{title:"Code", category:"Editors", description:"", link:"https://jamesy-tech.github.io/text-editor", icon:"code.png"},
{title:"Notes", category:"Note Taking", description:"", link:"https://jamesy-tech.github.io/jamesy-creator-notes", icon:"notes.png"},
{title:"MD Viewer & Editor", category:"Tools", description:"", link:"view_md.html", icon:"markdown.png"},
{title:"Quiz Creator", category:"Creative", description:"", link:"https://jamesy-tech.github.io/JQuizzi3", icon:"jquizzi3.png"},
{title:"Chrome Extension", category:"Browser Tool", description:"", link:"https://drive.google.com/drive/folders/1pnG02tlIRZdsHOZvhbLiVHfDQQDKhsbv", icon:"open_in_new.png"}
];

function getQueryParam(param){
    return (new URLSearchParams(window.location.search)).get(param)||'';
}

function setQueryParam(query){
    const url=new URL(window.location.href);
    if(query && query.trim()) url.searchParams.set('query', query.trim());
    else url.searchParams.delete('query');
    history.replaceState({},'',url.toString());
}

function createSettingCard(setting) {
    const link = document.createElement('a');
    link.className = 'setting-link';
    link.href = setting.link;

    link.innerHTML = `
        <div class="setting-card">
            <div class="setting-icon">
                <img src="${setting.icon}" alt="${setting.title} icon" style="width:100%; height:100%;">
            </div>
            <div class="setting-info">
                <div class="setting-category">${setting.category}</div>
                <div class="setting-title">${setting.title}</div>
                <div class="setting-description">${setting.description}</div>
            </div>
            <svg class="setting-arrow" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
            </svg>
        </div>
    `;

    link.addEventListener('click', function(e) {
        e.preventDefault(); // prevent normal navigation
        window.top.location.href = setting.link; // redirect top window
    });

    return link;
}

function openGoogleSearch(query) {
    window.top.location.href = 'https://www.google.com/search?q=' + encodeURIComponent(query);
}

function displayResults(){
    const query=getQueryParam('query')||'';
    const searchInfo=document.getElementById('searchInfo');
    const noResults=document.getElementById('noResults');
    const resultsGrid=document.getElementById('resultsGrid');
    const googleSearchCard=document.getElementById('googleSearchCard');
    const googleSearchText=document.getElementById('googleSearchText');
    const breadcrumbLast=document.querySelector('.breadcrumb span:last-child');
    const pageTitle=document.querySelector('.page-title');
    const searchInput=document.getElementById('searchInput');

    searchInput.value=query;

    if(!query.trim()){
        pageTitle.textContent='Apps & Tools';
        breadcrumbLast.textContent='Apps & Tools';
        searchInfo.style.display='block';
        searchInfo.textContent="All resources";
    } else {
        pageTitle.textContent='Search results';
        breadcrumbLast.textContent='Search results';
        searchInfo.style.display='block';
        searchInfo.textContent=`Search results for "${query}"`;
    }

    const filtered=(query.trim()) ? settingsData.filter(item=>{
        const s=query.toLowerCase();
        return item.title.toLowerCase().includes(s) || item.category.toLowerCase().includes(s) || item.description.toLowerCase().includes(s);
    }) : settingsData.slice();

    resultsGrid.innerHTML='';

    if(filtered.length===0 && query.trim()){
        noResults.style.display='block';
        resultsGrid.style.display='none';
        googleSearchCard.style.display='flex';
        googleSearchText.textContent=`Search "${query}" on Google`;
    } else {
        noResults.style.display='none';
        resultsGrid.style.display='grid';
        if(query.trim() && filtered.length>0){
            googleSearchCard.style.display='none';
        }
        filtered.forEach(item=>{
            resultsGrid.appendChild(createSettingCard(item));
        });
    }

    googleSearchCard.onclick=()=>{ openGoogleSearch(query); };
}

function debounce(fn,wait){
    let t;
    return function(){
        const args=arguments;
        clearTimeout(t);
        t=setTimeout(()=>{ fn.apply(null,args); }, wait);
    };
}

(function init(){
    const searchInput=document.getElementById('searchInput');
    const initial=getQueryParam('query')||'';
    setQueryParam(initial);
    displayResults();

    const onInput=debounce(e=>{
        const v=e.target.value||'';
        setQueryParam(v);
        displayResults();
    },180);

    searchInput.addEventListener('input', onInput);
    window.addEventListener('popstate', displayResults);
})();
</script>
</body>
</html>
